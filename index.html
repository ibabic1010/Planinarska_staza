<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Planinarska staza</title>
    <!-- Učitaj Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <!-- Učitaj Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <style>
        /* Stil za kartu */
        #map {
            width: 100%;
            height: 600px;
        }
        .popup-image {
            display: block;
            max-width: 100%;
            cursor: pointer;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
        }
        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
        }
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Planinarska staza</h1>
    <div id="map"></div>

    <!-- Modal za proširenu sliku -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        // Kreiraj mapu
        let map = L.map('map').setView([45.90382018082172, 15.969204292184454], 13);

        // Dodaj osnovnu kartu (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Dodaj marker na sredini staze
        let middleMarker = L.marker([45.90382018082172, 15.969204292184454], {
            icon: L.icon({
                iconUrl: 'https://leafletjs.com/examples/custom-icons/leaf-green.png', // URL za ikonu
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [0, -41]
            })
        }).addTo(map)
          .bindPopup(`
            <div style="text-align: center;">
                <h3>Točka na stazi</h3>
                <p>Detalji o stazi.</p>
                <img src="Staza18grafikon.png" alt="Grafikon" class="popup-image">
            </div>
          `, { closeButton: true });

        // Klik na marker otvara pop-up
        middleMarker.on('click', function() {
            this.openPopup();
        });

        // Dodaj funkcionalnost za proširenje slike
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const closeModal = document.querySelector('.modal-close');

        document.body.addEventListener('click', function(event) {
            if (event.target.classList.contains('popup-image')) {
                modal.style.display = 'block';
                modalImage.src = event.target.src;
            }
        });

        closeModal.addEventListener('click', function() {
            modal.style.display = 'none';
        });

        modal.addEventListener('click', function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Dodaj mjerilo u donjem lijevom kutu
        L.control.scale().addTo(map);
    </script>
</body>
</html>
